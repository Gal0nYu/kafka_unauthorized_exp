# Kafka 未授权访问检测脚本

该脚本用于检测目标 Kafka 服务是否存在未授权访问漏洞，并测试以下高危功能：

- 是否可列出 Topics（基础访问）
- 是否可消费消息（数据读取 / 泄露风险）
- 是否可生产消息（数据写入 / 篡改风险）
- 是否可访问 Web 管理界面（无认证 UI 暴露）

---

## ✅ 参数说明

| 参数             | 是否必填 | 默认值 | 示例              | 说明                                       |
|------------------|----------|--------|-------------------|--------------------------------------------|
| `--kafka-ip` / `-k` | ✅ 必填   | 无     | `192.168.193.48`  | Kafka Broker 的 IP 地址                     |
| `--kafka-port` / `-kp` | ❌ 可选   | `9092` | `9093`            | Kafka 服务的端口                            |
| `--web-ip` / `-w`   | ❌ 可选   | 与 Kafka IP 相同 | `192.168.193.49` | Web 管理界面的 IP（可选，默认与 Kafka IP 一致） |
| `--web-port` / `-wp` | ❌ 可选   | `9090` | `8080`            | Web 管理界面的端口                          |

> 🎯 ​**注意：如果只传入 `--kafka-ip`，其他端口将自动使用默认值（Kafka=9092，Web=9090）​**

---

## ✅ 脚本功能

| 检测项               | 是否实现 | 说明                                                         |
|----------------------|----------|--------------------------------------------------------------|
| 列出 Topics（未授权访问） | ✅       | 检测 Kafka 是否允许未授权列出所有 Topic，确认基础访问权限     |
| 消费消息（读取数据）     | ✅       | 检测是否可读取 Topic 中的消息内容，可能造成敏感信息泄露       |
| 生产消息（写入数据）     | ✅       | 检测是否可向 Topic 写入数据，可能导致数据污染或业务逻辑破坏   |
| 访问 Web 管理界面       | ✅       | 检测是否可无认证访问 Kafka 的 Web UI（如端口 9090），泄露管理信息 |

---

## ▶️ 使用示例

### ▶️ 只传入 Kafka IP，其他使用默认端口：

```bash
python3 exp_kafka.py --kafka-ip 192.168.193.48
